var tool = {
    /*获取用户信息*/
    getUserInfo: function (req) {
        if (typeof pconst == 'undefined') return {};

        var userInfo = req.session ? req.session[this.customSessionIdName] : (req || {}).cookies[this.customSessionIdName];
        if (_config.isRealData === true) return userInfo;
        return userInfo || {};
    },
    /*缓存用户信息*/
    storeUserInfo: function (req, res, user) {
        user = user || {};
        if (req.session) {
            user._id = user.user_id || user.customer_id || user.person_id;
            user._customer_id = user.customer_id || '';
            user._name = user.company_name || user.name || user.user_name;
            user._system_code = user.system_code || '';
            user._image_secret = user.image_secret || '';
            return req.session[this.customSessionIdName] = user;
        }
        return res.cookie(this.customSessionIdName, user);
    },
    customSessionIdName: _config.port.toString(),
};

module.exports = tool;